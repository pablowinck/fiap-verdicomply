# Configurações de conexão com o Oracle da FIAP
spring.datasource.url=jdbc:oracle:thin:@oracle.fiap.com.br:1521:orcl
spring.datasource.username=RM557024
spring.datasource.password=240200
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# Permitir sobrescrita de definições de beans
spring.main.allow-bean-definition-overriding=true

# Configurações adicionais para otimização da conexão
spring.datasource.hikari.connection-timeout=120000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=300000

# Configurações do JPA/Hibernate
spring.jpa.database-platform=org.hibernate.dialect.OracleDialect
# Alterado para create para forçar a criação das tabelas ausentes
spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
# Configurações para ajudar na resolução do EntityManagerFactory
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.properties.hibernate.hbm2ddl.auto=create

# Configurações do Flyway
# Usando os mesmos valores da conexão principal
spring.flyway.url=jdbc:oracle:thin:@oracle.fiap.com.br:1521:orcl
spring.flyway.user=RM557024
spring.flyway.password=240200

# Configurações para recuperação robusta
# Desabilita validação para evitar problemas com migrações falhas
spring.flyway.validate-on-migrate=false

# Permite limpeza do banco em caso de erro de validação
spring.flyway.clean-on-validation-error=true
spring.flyway.clean-disabled=false

# Configuração para limpeza automática ao iniciar (usar com cuidado!)
# Isso ajudará a garantir que o esquema esteja limpo a cada inicialização
spring.flyway.clean-before-migrate=true

# Configuração para recuperação e flexibilidade
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0
spring.flyway.repair=true
spring.flyway.out-of-order=true

# Ignora problemas comuns com migrações
spring.flyway.ignore-migration-patterns=*:missing
spring.flyway.ignore-pending-migrations=true
spring.flyway.ignore-future-migrations=true
spring.flyway.ignore-missing-migrations=true
spring.flyway.ignore-ignored-migrations=true

# Configurações específicas para Oracle
spring.flyway.oracle.sqlplus=false
spring.flyway.mixed=true
spring.flyway.group=true

# Configurações de JWT
jwt.secret=3778214125442A472D4B614E645267556B58703273357638792F423F4528472B
jwt.expiration=86400000
jwt.header=Authorization
jwt.prefix=Bearer
